<script type="text/javascript">
    RED.nodes.registerType('playwright-scraper', {
        category: 'function',
        color: '#FF6B6B',
        defaults: {
            name: {value: ''},
            url: {value: ''},
            selectors: {value: '{\n  "title": "h1",\n  "description": "meta[name=\'description\']",\n  "text": "p"\n}'}
        },
        inputs: 1,
        outputs: 2,  // –ü–µ—Ä–≤—ã–π –≤—ã—Ö–æ–¥: —É—Å–ø–µ—Ö, –í—Ç–æ—Ä–æ–π –≤—ã—Ö–æ–¥: –æ—à–∏–±–∫–∞
        icon: 'font-awesome/fa-search',
        label: function() {
            return this.name || 'Playwright Scraper';
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        }
    });
</script>

<script type="text/html" data-template-name="playwright-scraper">
    <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —É–∑–ª–∞ -->
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> –ù–∞–∑–≤–∞–Ω–∏–µ</label>
        <input type="text" id="node-input-name" placeholder="–ú–æ–π —Å–∫—Ä–∞–ø–µ—Ä –¥–∞–Ω–Ω—ã—Ö">
    </div>
    
    <!-- URL -->
    <div class="form-row">
        <label for="node-input-url"><i class="fa fa-globe"></i> URL</label>
        <input type="text" id="node-input-url" placeholder="https://example.com" style="width: 70%;">
        <div style="font-size: 0.8em; color: #666; margin-top: 5px;">
            –ê–¥—Ä–µ—Å —Å–∞–π—Ç–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö<br>
            üí° –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ä–µ–∑ <code>msg.url</code>
        </div>
    </div>
    
    <!-- CSS –°–µ–ª–µ–∫—Ç–æ—Ä—ã -->
    <div class="form-row">
        <label for="node-input-selectors"><i class="fa fa-code"></i> CSS –°–µ–ª–µ–∫—Ç–æ—Ä—ã (JSON)</label>
        <textarea id="node-input-selectors" rows="8" style="width: 70%; font-family: monospace;" placeholder='{"title": "h1", "text": "p"}'></textarea>
        <div style="font-size: 0.8em; color: #666; margin-top: 5px;">
            JSON –æ–±—ä–µ–∫—Ç —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º–∏ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö<br>
            üí° –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ä–µ–∑ <code>msg.selectors</code>
        </div>
    </div>
    
    <!-- –ü—Ä–∏–º–µ—Ä—ã —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -->
    <div class="form-row">
        <div style="background: #fff8dc; border: 1px solid #ddd; border-radius: 5px; padding: 10px;">
            <h4 style="margin: 0 0 10px 0; color: #8b7355;">üí° –ü—Ä–∏–º–µ—Ä—ã CSS —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤</h4>
            <ul style="margin: 0; padding-left: 20px; font-size: 0.85em;">
                <li><code>"title": "h1"</code> - –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
                <li><code>"price": ".price"</code> - —ç–ª–µ–º–µ–Ω—Ç —Å –∫–ª–∞—Å—Å–æ–º price</li>
                <li><code>"email": "a[href^='mailto:']"</code> - —Å—Å—ã–ª–∫–∏ email</li>
                <li><code>"meta": "meta[name='description']"</code> - –º–µ—Ç–∞ –æ–ø–∏—Å–∞–Ω–∏–µ</li>
                <li><code>"text": "p:first-of-type"</code> - –ø–µ—Ä–≤—ã–π –ø–∞—Ä–∞–≥—Ä–∞—Ñ</li>
            </ul>
        </div>
    </div>
    
    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="form-row">
        <div style="background: #f0f8ff; border: 1px solid #b0d4ff; border-radius: 5px; padding: 10px; margin-top: 10px;">
            <h4 style="margin: 0 0 10px 0; color: #2e75b6;">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
            <ul style="margin: 0; padding-left: 20px; font-size: 0.9em;">
                <li><strong>–ü–µ—Ä–≤—ã–π –≤—ã—Ö–æ–¥:</strong> –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</li>
                <li><strong>–í—Ç–æ—Ä–æ–π –≤—ã—Ö–æ–¥:</strong> –û—à–∏–±–∫–∏</li>
                <li><strong>–§–æ—Ä–º–∞—Ç:</strong> JSON —Å –ø–∞—Ä–∞–º–∏ –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ</li>
                <li><strong>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:</strong> –ñ–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
            </ul>
        </div>
    </div>
</script>

<script type="text/html" data-help-name="playwright-scraper">
    <p>üîç <strong>Playwright Scraper</strong> - —É–∑–µ–ª –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü.</p>
    
    <h3>üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h3>
    <ul>
        <li><b>–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞:</b> –ü–æ CSS —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º</li>
        <li><b>–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:</b> –ù–µ—Å–∫–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∑–∞ —Ä–∞–∑</li>
        <li><b>–£–º–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ:</b> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏</li>
        <li><b>JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</b> –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</li>
    </ul>

    <h3>‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
    <ul>
        <li><b>URL:</b> –ê–¥—Ä–µ—Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Å–∫—Ä–∞–ø–∏–Ω–≥–∞</li>
        <li><b>CSS –°–µ–ª–µ–∫—Ç–æ—Ä—ã:</b> JSON –æ–±—ä–µ–∫—Ç —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º–∏</li>
    </ul>

    <h3>üì® –í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è</h3>
    <p>–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ—Ä–µ–∑ <code>msg</code>:</p>
    <ul>
        <li><code>msg.url</code> - URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
        <li><code>msg.selectors</code> - –û–±—ä–µ–∫—Ç –∏–ª–∏ JSON —Å—Ç—Ä–æ–∫–∞ —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º–∏</li>
    </ul>

    <h3>üì§ –†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
    <p><b>–ü–µ—Ä–≤—ã–π –≤—ã—Ö–æ–¥ (—É—Å–ø–µ—Ö):</b></p>
    <ul>
        <li><code>msg.payload.success</code> - true</li>
        <li><code>msg.payload.data</code> - –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</li>
        <li><code>msg.payload.url</code> - URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
        <li><code>msg.payload.selectors_used</code> - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã</li>
    </ul>
    
    <p><b>–í—Ç–æ—Ä–æ–π –≤—ã—Ö–æ–¥ (–æ—à–∏–±–∫–∞):</b></p>
    <ul>
        <li><code>msg.payload.success</code> - false</li>
        <li><code>msg.payload.error</code> - –û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏</li>
    </ul>

    <h3>üí° –ü—Ä–∏–º–µ—Ä—ã CSS —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤</h3>
    <pre>{
  "title": "h1",
  "price": ".price, .cost",
  "description": "meta[name='description']",
  "links": "a[href]",
  "images": "img[src]",
  "text": "p:first-of-type"
}</pre>

    <h3>üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h3>
    <ul>
        <li>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞—Ö</li>
        <li>–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</li>
        <li>–ü–∞—Ä—Å–∏–Ω–≥ –Ω–æ–≤–æ—Å—Ç–Ω—ã—Ö —Å–∞–π—Ç–æ–≤</li>
        <li>–°–±–æ—Ä –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</li>
        <li>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ —Å–∞–π—Ç–∞—Ö</li>
    </ul>
</script> 