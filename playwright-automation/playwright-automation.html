<script type="text/javascript">
    RED.nodes.registerType('playwright-automation', {
        category: 'function',
        color: '#4B9EFF',
        defaults: {
            name: {value: ''},
            action: {value: 'test'},
            url: {value: ''},
            delay: {value: 1000}
        },
        inputs: 1,
        outputs: 2,  // –ü–µ—Ä–≤—ã–π –≤—ã—Ö–æ–¥: —É—Å–ø–µ—Ö, –í—Ç–æ—Ä–æ–π –≤—ã—Ö–æ–¥: –æ—à–∏–±–∫–∞
        icon: 'font-awesome/fa-globe',
        label: function() {
            return this.name || `Playwright ${this.action}`;
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        }
    });
</script>

<script type="text/html" data-template-name="playwright-automation">
    <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —É–∑–ª–∞ -->
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> –ù–∞–∑–≤–∞–Ω–∏–µ</label>
        <input type="text" id="node-input-name" placeholder="–ú–æ–π Playwright —É–∑–µ–ª">
    </div>
    
    <!-- –î–µ–π—Å—Ç–≤–∏–µ -->
    <div class="form-row">
        <label for="node-input-action"><i class="fa fa-cog"></i> –î–µ–π—Å—Ç–≤–∏–µ</label>
        <select id="node-input-action" style="width: 70%;">
            <option value="test">–¢–µ—Å—Ç (—Å–∫—Ä–∏–Ω—à–æ—Ç + –∑–∞–≥–æ–ª–æ–≤–æ–∫)</option>
            <option value="screenshot">–°–∫—Ä–∏–Ω—à–æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã</option>
        </select>
        <div style="font-size: 0.8em; color: #666; margin-top: 5px;">
            –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
        </div>
    </div>
    
    <!-- URL -->
    <div class="form-row">
        <label for="node-input-url"><i class="fa fa-globe"></i> URL</label>
        <input type="text" id="node-input-url" placeholder="https://google.com" style="width: 70%;">
        <div style="font-size: 0.8em; color: #666; margin-top: 5px;">
            –ê–¥—Ä–µ—Å —Å–∞–π—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏<br>
            üí° –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ä–µ–∑ <code>msg.url</code>
        </div>
    </div>
    
    <!-- –ó–∞–¥–µ—Ä–∂–∫–∞ -->
    <div class="form-row">
        <label for="node-input-delay"><i class="fa fa-clock-o"></i> –ó–∞–¥–µ—Ä–∂–∫–∞ (–º—Å)</label>
        <input type="number" id="node-input-delay" placeholder="1000" min="0" step="100" style="width: 100px;">
        <div style="font-size: 0.8em; color: #666; margin-top: 5px;">
            –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º<br>
            üí° –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ä–µ–∑ <code>msg.delay</code>
        </div>
    </div>
    
    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="form-row">
        <div style="background: #f0f8ff; border: 1px solid #b0d4ff; border-radius: 5px; padding: 10px; margin-top: 10px;">
            <h4 style="margin: 0 0 10px 0; color: #2e75b6;">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
            <ul style="margin: 0; padding-left: 20px; font-size: 0.9em;">
                <li><strong>–ü–µ—Ä–≤—ã–π –≤—ã—Ö–æ–¥:</strong> –£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</li>
                <li><strong>–í—Ç–æ—Ä–æ–π –≤—ã—Ö–æ–¥:</strong> –û—à–∏–±–∫–∏</li>
                <li><strong>–°–∫—Ä–∏–Ω—à–æ—Ç:</strong> –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ base64 —Ñ–æ—Ä–º–∞—Ç–µ</li>
                <li><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ—Ä–µ–∑ msg:</strong> url, action, delay</li>
            </ul>
        </div>
    </div>
</script>

<script type="text/html" data-help-name="playwright-automation">
    <p>üé≠ <strong>Playwright Automation</strong> - —É–∑–µ–ª –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ JavaScript.</p>
    
    <h3>üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h3>
    <ul>
        <li><b>–¢–µ—Å—Ç:</b> –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–∞ (—Å–∫—Ä–∏–Ω—à–æ—Ç + –∑–∞–≥–æ–ª–æ–≤–æ–∫)</li>
        <li><b>–°–∫—Ä–∏–Ω—à–æ—Ç:</b> –ü–æ–ª–Ω—ã–π —Å–∫—Ä–∏–Ω—à–æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ base64</li>
    </ul>

    <h3>‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
    <ul>
        <li><b>URL:</b> –ê–¥—Ä–µ—Å —Å–∞–π—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏</li>
        <li><b>–ó–∞–¥–µ—Ä–∂–∫–∞:</b> –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö</li>
        <li><b>–î–µ–π—Å—Ç–≤–∏–µ:</b> –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ç–µ—Å—Ç/—Å–∫—Ä–∏–Ω—à–æ—Ç)</li>
    </ul>

    <h3>üì® –í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è</h3>
    <p>–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ—Ä–µ–∑ <code>msg</code>:</p>
    <ul>
        <li><code>msg.url</code> - URL —Å–∞–π—Ç–∞</li>
        <li><code>msg.action</code> - –î–µ–π—Å—Ç–≤–∏–µ ('test' –∏–ª–∏ 'screenshot')</li>
        <li><code>msg.delay</code> - –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö</li>
    </ul>

    <h3>üì§ –†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
    <p><b>–ü–µ—Ä–≤—ã–π –≤—ã—Ö–æ–¥ (—É—Å–ø–µ—Ö):</b></p>
    <ul>
        <li><code>msg.payload.success</code> - true</li>
        <li><code>msg.payload.screenshot</code> - base64 —Å–∫—Ä–∏–Ω—à–æ—Ç</li>
        <li><code>msg.payload.title</code> - –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
        <li><code>msg.payload.url</code> - URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
    </ul>
    
    <p><b>–í—Ç–æ—Ä–æ–π –≤—ã—Ö–æ–¥ (–æ—à–∏–±–∫–∞):</b></p>
    <ul>
        <li><code>msg.payload.success</code> - false</li>
        <li><code>msg.payload.error</code> - –æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏</li>
    </ul>

    <h3>üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h3>
    <ul>
        <li>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–æ–≤</li>
        <li>–°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤</li>
        <li>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö</li>
        <li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤</li>
    </ul>
</script> 