<script type="text/javascript">
    RED.nodes.registerType('playwright-session-start', {
        category: 'function',
        color: '#4CAF50',
        defaults: {
            name: {value: ""},
            url: {value: "", required: false},
            browser_options: {value: "{}", required: false}
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["–£—Å–ø–µ—Ö", "–û—à–∏–±–∫–∞"],
        icon: "font-awesome/fa-play-circle",
        label: function() {
            return this.name || "–ù–∞—á–∞—Ç—å —Å–µ—Å—Å–∏—é";
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –æ–ø—Ü–∏–π –±—Ä–∞—É–∑–µ—Ä–∞
            if (!this.browser_options) {
                this.browser_options = "{}";
            }
        }
    });
</script>

<script type="text/html" data-template-name="playwright-session-start">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> –ù–∞–∑–≤–∞–Ω–∏–µ</label>
        <input type="text" id="node-input-name" placeholder="–ù–∞—á–∞—Ç—å —Å–µ—Å—Å–∏—é">
    </div>
    
    <div class="form-row">
        <label for="node-input-url"><i class="fa fa-globe"></i> URL</label>
        <input type="text" id="node-input-url" placeholder="https://example.com">
        <div class="form-tips">
            <strong>URL —Å–∞–π—Ç–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è.</strong><br>
            –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ msg.url
        </div>
    </div>
    
    <div class="form-row">
        <label for="node-input-browser_options"><i class="fa fa-cog"></i> –û–ø—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞</label>
        <input type="text" id="node-input-browser_options" placeholder='{"headless": true}'>
        <div class="form-tips">
            <strong>JSON –æ–ø—Ü–∏–∏ –¥–ª—è Playwright –±—Ä–∞—É–∑–µ—Ä–∞</strong><br>
            –ù–∞–ø—Ä–∏–º–µ—Ä: {"headless": false, "slowMo": 100}
        </div>
    </div>
</script>

<script type="text/html" data-help-name="playwright-session-start">
    <p>üü¢ <strong>–ù–∞—á–∞—Ç—å —Å–µ—Å—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞</strong></p>
    
    <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
    <p>–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞ Playwright –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç session_id –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.</p>
    
    <h3>–í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
    <dl class="message-properties">
        <dt>url <span class="property-type">—Å—Ç—Ä–æ–∫–∞</span></dt>
        <dd>URL —Å–∞–π—Ç–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è. –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –Ω–æ–¥—ã.</dd>
        
        <dt>browser_options <span class="property-type">–æ–±—ä–µ–∫—Ç</span></dt>
        <dd>–û–ø—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞ (headless, slowMo, etc.)</dd>
    </dl>

    <h3>–í—ã—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
    <dl class="message-properties">
        <dt>session_id <span class="property-type">—Å—Ç—Ä–æ–∫–∞</span></dt>
        <dd>–£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞</dd>
        
        <dt>browser_ready <span class="property-type">boolean</span></dt>
        <dd>true - –±—Ä–∞—É–∑–µ—Ä –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</dd>
        
        <dt>initial_url <span class="property-type">—Å—Ç—Ä–æ–∫–∞</span></dt>
        <dd>URL –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –æ—Ç–∫—Ä—ã—Ç</dd>
        
        <dt>payload.success <span class="property-type">boolean</span></dt>
        <dd>–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏</dd>
    </dl>

    <h3>–í—ã—Ö–æ–¥—ã</h3>
    <ol class="node-ports">
        <li><strong>–£—Å–ø–µ—Ö:</strong> –°–µ—Å—Å–∏—è —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ</li>
        <li><strong>–û—à–∏–±–∫–∞:</strong> –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏</li>
    </ol>

    <h3>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h3>
    <pre>
// –í—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
{ "url": "https://google.com" }

// –í—ã—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
{
  "session_id": "sess_1672531200000_abc123",
  "browser_ready": true,
  "initial_url": "https://google.com",
  "payload": {
    "success": true,
    "session_id": "sess_1672531200000_abc123",
    "message": "–°–µ—Å—Å–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ"
  }
}
    </pre>
    
    <h3>–í–∞–∂–Ω–æ</h3>
    <ul>
        <li>üîó <strong>session_id</strong> –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –Ω–æ–¥–∞–º</li>
        <li>‚è∞ –°–µ—Å—Å–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</li>
        <li>üßπ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <strong>playwright-session-end</strong> –¥–ª—è —è–≤–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è</li>
    </ul>
</script> 