<script type="text/javascript">
    RED.nodes.registerType('playwright-session-end', {
        category: 'function',
        color: '#F44336',
        defaults: {
            name: {value: ""}
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["–£—Å–ø–µ—Ö", "–û—à–∏–±–∫–∞"],
        icon: "font-awesome/fa-stop-circle",
        label: function() {
            return this.name || "–ó–∞–∫—Ä—ã—Ç—å —Å–µ—Å—Å–∏—é";
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        }
    });
</script>

<script type="text/html" data-template-name="playwright-session-end">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> –ù–∞–∑–≤–∞–Ω–∏–µ</label>
        <input type="text" id="node-input-name" placeholder="–ó–∞–∫—Ä—ã—Ç—å —Å–µ—Å—Å–∏—é">
    </div>
    
    <div class="form-tips">
        <p><strong>üî¥ –≠—Ç–∞ –Ω–æ–¥–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã.</strong></p>
        <p>session_id –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ—Ä–µ—Ç—Å—è –∏–∑ –≤—Ö–æ–¥—è—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.</p>
        <p>–ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–µ—Å—Å–∏–∏, –±—Ä–∞—É–∑–µ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.</p>
    </div>
</script>

<script type="text/html" data-help-name="playwright-session-end">
    <p>üî¥ <strong>–ó–∞–∫—Ä—ã—Ç—å —Å–µ—Å—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞</strong></p>
    
    <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
    <p>–ó–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (–±—Ä–∞—É–∑–µ—Ä, —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ–Ω—Ç–µ–∫—Å—Ç).</p>
    
    <h3>–í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
    <dl class="message-properties">
        <dt>session_id <span class="property-type">—Å—Ç—Ä–æ–∫–∞</span></dt>
        <dd><strong>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.</strong> ID —Å–µ—Å—Å–∏–∏ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è</dd>
    </dl>

    <h3>–í—ã—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
    <dl class="message-properties">
        <dt>payload.success <span class="property-type">boolean</span></dt>
        <dd>–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–∫—Ä—ã—Ç–∏—è —Å–µ—Å—Å–∏–∏</dd>
        
        <dt>payload.closed <span class="property-type">boolean</span></dt>
        <dd>true - —Å–µ—Å—Å–∏—è –±—ã–ª–∞ –∑–∞–∫—Ä—ã—Ç–∞, false - —É–∂–µ –±—ã–ª–∞ –∑–∞–∫—Ä—ã—Ç–∞</dd>
        
        <dt>payload.message <span class="property-type">—Å—Ç—Ä–æ–∫–∞</span></dt>
        <dd>–°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</dd>
    </dl>

    <h3>–í—ã—Ö–æ–¥—ã</h3>
    <ol class="node-ports">
        <li><strong>–£—Å–ø–µ—Ö:</strong> –°–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞ —É—Å–ø–µ—à–Ω–æ</li>
        <li><strong>–û—à–∏–±–∫–∞:</strong> –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏</li>
    </ol>

    <h3>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h3>
    <pre>
// –í—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
{
  "session_id": "sess_1672531200000_abc123"
}

// –í—ã—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
{
  "payload": {
    "success": true,
    "closed": true,
    "session_id": "sess_1672531200000_abc123",
    "message": "–°–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞ —É—Å–ø–µ—à–Ω–æ"
  }
}
    </pre>
    
    <h3>–í–∞–∂–Ω–æ</h3>
    <ul>
        <li>üßπ <strong>–û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã:</strong> –±—Ä–∞—É–∑–µ—Ä, –ø–∞–º—è—Ç—å, –ø—Ä–æ—Ü–µ—Å—Å—ã</li>
        <li>‚ö†Ô∏è <strong>–ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è</strong> session_id —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º</li>
        <li>üîÑ <strong>–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞:</strong> —Å–µ—Å—Å–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 30 –º–∏–Ω –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</li>
        <li>üõë <strong>Graceful shutdown:</strong> –≤—Å–µ —Å–µ—Å—Å–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ Node-RED</li>
    </ul>
    
    <h3>–¢–∏–ø–∏—á–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞</h3>
    <pre>
[inject] ‚Üí [session-start] ‚Üí [session-action] ‚Üí [session-action] ‚Üí [session-end]
   ‚Üì            ‚Üì                  ‚Üì               ‚Üì               ‚Üì
 –°—Ç–∞—Ä—Ç      –û—Ç–∫—Ä—ã—Ç—å           –í–≤–µ—Å—Ç–∏ email     –ö–ª–∏–∫–Ω—É—Ç—å        –ó–∞–∫—Ä—ã—Ç—å
           –±—Ä–∞—É–∑–µ—Ä           –≤ —Ñ–æ—Ä–º—É          –∫–Ω–æ–ø–∫—É          –±—Ä–∞—É–∑–µ—Ä
    </pre>
</script> 